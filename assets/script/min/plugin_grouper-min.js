function getUrlParameter(t){for(var n=window.location.search.substring(1),a=n.split("&"),i=0;i<a.length;i++){var o=a[i].split("=");if(o[0]===t)return o[1]}}jQuery(document).ready(function($){$("#group-manager-setting-text").click(function(t){var n={action:"PIGPR Setting Text",mode:"Plugin Manager",status:$("#group-manager-setting-text:checked").length};$obj=$(this),$.post(ajaxurl,n,function(t){t?$(".button-plugin-manager .text").addClass("hidden"):$(".button-plugin-manager .text").removeClass("hidden")},"json")}),$(".btn-delete_group").click(function(t){confirm("Do you really want to delete this?")||t.preventDefault()})}),jQuery(document).ready(function($){function t(t){return t?(t=t.replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"),$('.plugin_grouper_wrap input[type="checkbox"][data-id="'+t+'"]')):$('.plugin_grouper_wrap input[type="checkbox"]')}function n(){var n=0;return t().each(function(){$(this).prop("checked")&&n++}),n}function a(t){return $(t?'.wp-list-table.plugins tr[data-plugin="'+t+'"]':".plugin_grouper_wrap")}function i(){t().click(function(){var t=$(this).attr("data-plugin-id"),n=$(this).attr("data-id"),i=$(this).attr("data-name"),u={mode:"Plugin Manager",plugin_id:t,group_id:n,group_name:i};r(),$(this).is(":checked")?(u.action="PIGPR_INPUT_INTO_GROUP",$.post(ajaxurl,u,function(u){var r='<a href="'+u.url+'" data-id="'+n+'" style="background-color:'+u.bgcolor+"; color:"+u.color+'" data-id="'+n+'" data-bgcolor="'+u.bgcolor+'" data-color="'+u.color+'">'+i+"</a>";a(t).find("td.column-description .groups").append(r),e();var l=$(".subsubsub.plugin-groups li."+n+" .count").html();l=parseInt(l.substr(1,l.length-2))+1,$(".subsubsub.plugin-groups li."+n+" .count").html("("+l+")"),o("trace adding")},"json")):(u.action="PIGPR_DELETE_FROM_GROUP",$.post(ajaxurl,u,function(i){a(t).find('td.column-description .groups a[data-id="'+n+'"]').remove(),e();var u=$(".subsubsub.plugin-groups li."+n+" .count").html();u=parseInt(u.substr(1,u.length-2))-1,$(".subsubsub.plugin-groups li."+n+" .count").html("("+u+")"),o("trace subtraction")},"json"))})}function o(t){var a=n();if(1==a||0==a){var i=$(".subsubsub.plugin-groups li.not-in-any-groups .count").html();i=parseInt(i.substr(1,i.length-2)),1==a&&"trace adding"==t&&i--,0==a&&"trace subtraction"==t&&i++,$(".subsubsub.plugin-groups li.not-in-any-groups .count").html("("+i+")")}}function u(){a().remove(),$(".group_open").removeClass("group_open")}function r(){$(".wp-list-table.plugins .loading_spinner").show(),t().attr("disabled",!0)}function e(){$(".wp-list-table.plugins .loading_spinner").hide(),t().removeAttr("disabled")}function l(){$(".wp-list-table.plugins .btn-close_group").click(function(t){return t.preventDefault(),u(),!0})}function s(){$(".wp-list-table.plugins .inp-create_group").keypress(function(t){10!==t.which&&13!==t.which||($(".wp-list-table.plugins .btn-create_group").click(),t.preventDefault())}),$(".wp-list-table.plugins .btn-create_group").click(function(t){if(t.preventDefault(),$(".wp-list-table.plugins .inp-create_group").val().length){var n=$(".plugin_grouper_wrap").attr("data-plugin"),a={action:"PIGPR_CREATE_GROUP",mode:"Plugin Manager",group_name:$(".wp-list-table.plugins .inp-create_group").val(),plugin_id:n};r(),$.post(ajaxurl,a,function(t){e();var a=t.url,u=t.group_id,r=t.group_name,l=t.bgcolor,s=t.color;$(".plugin_grouper_wrap ul").append("<li></li>"),$("#Grouping-Row ul").append("<li></li>");var c=$(".plugin_grouper_wrap ul li:last-child"),d=$("#Grouping-Row ul li:last-child"),g=c.index(),h="";h='<label for="group_radio_'+g+'">',h+='<input id="group_radio_'+g+'" type="checkbox" data-id="'+u+'"  data-name="'+r+'" data-plugin-id="'+n+'" />',h+=r,h+="</label>",h+="</label>",h+='<input type="text" value="'+l+'" class="group_colour_picker" data-id="'+u+'" />',c.html(h),h='<input type="checkbox" data-id="'+u+'"  data-name="'+r+'" data-plugin-id="'+n+'" />',h+="<label>"+r+"</label>",d.html(h),$(".subsubsub.plugin-groups li:last-child a").after(" |"),$(".subsubsub.plugin-groups li:last-child a").parent().after('<li class="group '+r+'"><a href="'+a+'" >'+r+'</a> <span class="count">(0)</span></li>'),i(),p(),$(".wp-list-table.plugins .inp-create_group").val(""),$("#group_radio_"+g).click(),o("trace adding")},"json")}else $(".wp-list-table.plugins .inp-create_group").focus();return!0})}function p(){$(".wp-list-table.plugins tr.plugin_grouper_wrap .group_colour_picker").each(function(){var t=$(this).attr("data-id");$(this).spectrum({showPaletteOnly:!0,color:$(this).val(),palette:[["#000000","#444444","#666666","#999999","#CCCCCC","#EEEEEE","#F3F3F3","#FFFFFF"],["#F00F00","#F90F90","#FF0FF0","#0F00F0","#0FF0FF","#00F00F","#90F90F","#F0FF0F"],["#F4CCCC","#FCE5CD","#FFF2CC","#D9EAD3","#D0E0E3","#CFE2F3","#D9D2E9","#EAD1DC"],["#EA9999","#F9CB9C","#FFE599","#B6D7A8","#A2C4C9","#9FC5E8","#B4A7D6","#D5A6BD"],["#E06666","#F6B26B","#FFD966","#93C47D","#76A5AF","#6FA8DC","#8E7CC3","#C27BA0"],["#C00C00","#E69138","#F1C232","#6AA84F","#45818E","#3D85C6","#674EA7","#A64D79"],["#900900","#B45F06","#BF9000","#38761D","#134F5C","#0B5394","#351C75","#741B47"],["#600600","#783F04","#7F6000","#274E13","#0C343D","#073763","#20124D","#4C1130"]],change:function(n){var a={action:"PIGPR_SET_GROUP_COLOR",group_id:t,color:n.toHexString(),mode:"Plugin Manager"};$.post(ajaxurl,a,function(n){$('.plugin-version-author-uri div.groups a[data-id="'+t+'"], .subsubsub.plugin-groups li.group a[data-id="'+t+'"]').css({"background-color":n.bgcolor,color:n.color}).attr("data-bgcolor",n.bgcolor).attr("data-color",n.color)},"json")}})})}function c(n){t().removeAttr("checked"),a(n).find("td.column-description .groups a").each(function(){var n=$(this).attr("data-id");t(n).attr("checked",!0)})}$(document).keyup(function(t){27==t.keyCode&&u()}),$(".button-grouping").click(function(t){if(t.preventDefault(),$(this).hasClass("group_open"))return u(),!0;u();var n=$(this).attr("data-plugin"),o=$("#Grouping-Row").clone();return a(n).first().after('<tr class="inactive plugin_grouper_wrap" data-plugin="'+n+'"><td colspan="1000">'+o.html()+"</td></tr>"),$(".plugin_grouper_wrap li").each(function(t){var a="group_radio_"+t;$(this).find("input").attr("data-plugin-id",n),$(this).find("input").attr("id",a),$(this).find("label").attr("for",a)}),$(this).addClass("group_open"),p(),l(),s(),i(),c(n),!0})}),jQuery(document).ready(function($){function t(t){t.parents("tr").addClass("locked"),t.parents("tr").removeClass("unlocked")}function n(t){t.parents("tr").removeClass("locked"),t.parents("tr").addClass("unlocked")}$("table.plugins tbody tr .row-actions .lock a.button-lock").each(function(){"locked"==$(this).attr("data-locked")?t($(this)):n($(this)),$(this).parents("tr").find("th.check-column").prepend('<span class="dashicons dashicons-lock"></span>')}),$(".button-lock").click(function(n){n.preventDefault();var a=$(this).attr("data-plugin_file"),i={action:"PIGPR_LOCK",mode:"Plugin Manager",plugin_file:a};$obj=$(this),$.post(ajaxurl,i,function(n){t($obj)},"json")}),$(".button-unlock").click(function(t){t.preventDefault();var a=$(this).attr("data-plugin_file"),i={action:"PIGPR_UNLOCK",mode:"Plugin Manager",plugin_file:a};$obj=$(this),$.post(ajaxurl,i,function(t){n($obj)},"json")})}),jQuery(document).ready(function($){function t(t){t.parents("tr").addClass("show"),t.parents("tr").removeClass("hide")}function n(t){t.parents("tr").removeClass("show"),t.parents("tr").addClass("hide")}$("table.plugins tbody tr .row-actions .hide a.button-hide").each(function(){"hidden"==$(this).attr("data-hidden")?n($(this)):t($(this))}),"hidden"==getUrlParameter("plugin_status")&&$("table.plugins").addClass("mode-show-hidden"),$(".button-hide").click(function(t){t.preventDefault();var a=$(this).attr("data-plugin_file"),i={action:"PIGPR_HIDE",mode:"Plugin Manager",plugin_file:a};$obj=$(this),$.post(ajaxurl,i,function(t){n($obj);var a=$(".subsubsub li.view_hidden .count").html();a=parseInt(a.substr(1,a.length-2))+1,$(".subsubsub li.view_hidden .count").html("("+a+")")},"json")}),$(".button-show").click(function(n){n.preventDefault();var a=$(this).attr("data-plugin_file"),i={action:"PIGPR_SHOW",mode:"Plugin Manager",plugin_file:a};$obj=$(this),$.post(ajaxurl,i,function(n){t($obj);var a=$(".subsubsub li.view_hidden .count").html();a=parseInt(a.substr(1,a.length-2))-1,$(".subsubsub li.view_hidden .count").html("("+a+")"),$obj.parents("tr").hide()},"json")})});